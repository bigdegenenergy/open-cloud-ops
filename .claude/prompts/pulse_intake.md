# Pulse Intake Bootstrap Prompt

This document defines the behavior when Claude receives a Pulse idea payload.

## Trigger Detection

When the user's message starts with a JSON object containing `"idea_id":`, this prompt should be followed.

## Payload Structure

```json
{
  "idea_id": "IDEA-XXXX",
  "title": "Feature Name",
  "description": "What this feature does",
  "day1_deliverables": ["First deliverable", "Second deliverable"],
  "technical_approach": "Optional implementation notes",
  "acceptance_criteria": ["Criterion 1", "Criterion 2"],
  "source_url": "Optional link to source",
  "_claude": {
    "action": "intake|start|review"
  }
}
```

## Actions

### `action: "intake"` (Default)

1. **Validate** payload against schema
2. **Create** `ideas/{idea_id}/` directory
3. **Write** `spec.json` with formatted payload
4. **Generate** `README.md` with human-readable summary
5. **Create** branch `idea/{idea_id}-{slug}`
6. **Report** status and wait for "start" command

### `action: "start"`

Same as intake, then immediately:

7. **Read** Day 1 deliverables
8. **Begin** implementing the first deliverable
9. **Use** TDD approach (tests first)
10. **Commit** after each deliverable

### `action: "review"`

1. **Validate** payload
2. **Analyze** feasibility and complexity
3. **Report** findings without creating any files
4. **Suggest** refinements if needed

## README Template

```markdown
# {title}

> Idea ID: {idea_id}

## Description

{description}

## Day 1 Deliverables

- [ ] {deliverable_1}
- [ ] {deliverable_2}
- [ ] {deliverable_3}

## Technical Approach

{technical_approach}

## Acceptance Criteria

- [ ] {criterion_1}
- [ ] {criterion_2}

---

_Generated by Pulse Intake on {date}_
```

## Branch Naming

Convert title to slug:

1. Lowercase all characters
2. Replace spaces and special chars with hyphens
3. Remove consecutive hyphens
4. Truncate to 50 characters max
5. Format: `idea/{idea_id}-{slug}`

Example: "User Activity Dashboard" → `idea/IDEA-0042-user-activity-dashboard`

## Validation Rules

### Required Fields

- `idea_id` - Must match pattern `IDEA-\d{4}` or similar identifier
- `title` - Non-empty string, max 100 characters
- `description` - Non-empty string
- `day1_deliverables` - Non-empty array of strings

### Optional Fields

- `technical_approach` - String with implementation notes
- `acceptance_criteria` - Array of strings
- `source_url` - Valid URL
- `_claude` - Automation control object

### Validation Errors

If validation fails, output:

````
## Validation Failed

**Errors:**
- {field}: {error_message}

**Payload received:**
```json
{raw_payload}
````

Please fix the errors and try again.

```

## Success Response Template

```

## Pulse Intake Complete ✓

**Idea:** {idea_id} - {title}
**Branch:** idea/{idea_id}-{slug}

### Files Created

- `ideas/{idea_id}/spec.json` - Full specification
- `ideas/{idea_id}/README.md` - Human-readable summary

### Day 1 Deliverables

- [ ] {deliverable_1}
- [ ] {deliverable_2}
- [ ] {deliverable_3}

### Next Steps

Say **"start"** to begin Day 1 implementation immediately.

Or switch to the branch manually:

```bash
git checkout idea/{idea_id}-{slug}
```

```

## Error Recovery

If an error occurs during intake:

1. **Don't leave partial state** - Clean up any created files
2. **Report the specific error** - What failed and why
3. **Suggest resolution** - How to fix and retry
4. **Preserve the payload** - User can fix and resubmit

## Integration with Day 1 Implementation

When "start" is triggered (either via `action: "start"` or user saying "start"):

1. Read `ideas/{idea_id}/spec.json`
2. Extract `day1_deliverables`
3. For each deliverable:
   - Write failing test first (TDD)
   - Implement minimal code to pass
   - Refactor if needed
   - Commit with message: `feat({idea_id}): {deliverable_summary}`
4. After all deliverables:
   - Run full test suite
   - Report completion status
   - Suggest next steps
```
